<div class="container">
  <h2>Ajouter un Document</h2>
  <form [formGroup]="documentForm" (ngSubmit)="onSubmit()">
    
    <div class="form-group">
      <label for="nomDoc">Nom du Document</label>
      <input id="nomDoc" formControlName="nomDoc" type="text" class="form-control" required/>
      <div *ngIf="documentForm.get('nomDoc')?.invalid && documentForm.get('nomDoc')?.touched" class="text-danger">
        Veuillez fournir un nom du document.
      </div>
    </div>
    
    <div class="form-group">
      <label for="typeDocNom">Type de Document</label>
      <select id="typeDocNom" formControlName="typeDocNom" class="form-control" required>
        <option *ngFor="let typeDoc of typeDocuments" [value]="typeDoc.nom">{{ typeDoc.nom }}</option>
      </select>
      <div *ngIf="documentForm.get('typeDocNom')?.invalid && documentForm.get('typeDocNom')?.touched" class="text-danger">
        Veuillez sélectionner un type de document.
      </div>
    </div>
    
    <div class="form-group">
        <label for="departementName">Département</label>
        <select id="departementName" formControlName="departementName" class="form-control" required>
          <option *ngFor="let department of departments" [value]="department.name">{{ department.name }}</option>
        </select>
        <div *ngIf="documentForm.get('departementName')?.invalid && documentForm.get('departementName')?.touched" class="text-danger">
          Veuillez sélectionner un département.
        </div>
    </div>
    
    <div class="form-group">
      <label for="nomClient">Nom du Client</label>
      <input id="nomClient" formControlName="nomClient" type="text" class="form-control" required/>
      <div *ngIf="documentForm.get('nomClient')?.invalid && documentForm.get('nomClient')?.touched" class="text-danger">
        Veuillez fournir le nom du client.
      </div>
    </div>
    
    <div class="form-group">
      <label for="numClient">Numéro téléphone du Client</label>
      <input id="numClient" formControlName="numClient" type="number" class="form-control" required/>
      <div *ngIf="documentForm.get('numClient')?.invalid && documentForm.get('numClient')?.touched" class="text-danger">
        Veuillez fournir le numéro du client.
      </div>
    </div>
    
    <div class="form-group">
      <label for="emailClient">Email du Client</label>
      <input id="emailClient" formControlName="emailClient" type="email" class="form-control" required/>
      <div *ngIf="documentForm.get('emailClient')?.invalid && documentForm.get('emailClient')?.touched" class="text-danger">
        Veuillez fournir une adresse email valide.
      </div>
    </div>
    
    <!-- Utilisateur -->
    <div class="form-group">
      <label for="userId">Utilisateur</label>
      <select id="userId" formControlName="userId" class="form-control" required>
        <option *ngFor="let user of users" [value]="user.id">{{ user.username }}</option>
      </select>
      <div *ngIf="documentForm.get('userId')?.invalid && documentForm.get('userId')?.touched" class="text-danger">
        Veuillez sélectionner un utilisateur.
      </div>
    </div>
    
    <!-- Fichier - Drag and Drop -->
    <div class="form-group">
      <label for="file">Fichier</label>
      <div
        class="file-drop-area"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onFileDropped($event)"
      >
        <span class="choose-file-text">Drag & Drop your file here or click to upload</span>
        <input id="file" type="file" class="file-input" (change)="onFileSelected($event)" required/>
      </div>

      <!-- Display the selected file name -->
      <div *ngIf="selectedFile" class="selected-file">
        Fichier sélectionné: {{ selectedFile.name }}
      </div>
      <div *ngIf="isFileInvalid()" class="text-danger">
        Veuillez sélectionner un fichier.
      </div>
    </div>
    
    <button type="submit" class="btn btn-primary">Ajouter</button>
  </form>
</div>
